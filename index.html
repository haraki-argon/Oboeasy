<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
		<title>覚Easy</title>
		<link rel="stylesheet" href="css/index.css">
	</head>
	<body>
		<ol class="page">
			<li>
				<div class="start">
					<h1>覚えましょう！</h1>
					<h2>テスト　０.１</h2>
					<ul>
						<li>任務</li>
						<li>単語</li>
						<li>データ</li>
					</ul>
				</div>
			</li>
			<li>
				<div class="write">
					<div class="left">
						<div>
							<h1>000</h1>
							<button id="undoBtn">撤回</button>
							<button id="clearBtn">クリア</button>
							<button class="nextBtn">次へ
						</div>
					</div>
					<div class="right">
						<canvas id="drawingCanvas"></canvas>
						<p>憧憬</p>
					</div>
				</div>
			</li>
		</ol>
	</body>
	<script src="js/write.js"></script>
	<script type="text/javascript">
		// 移动端Canvas书写优化
		function optimizeCanvasForMobile(canvas) {
		    // 阻止页面缩放和下拉刷新
		    document.addEventListener('touchmove', function(e) {
		        if (e.scale !== 1) {
		            e.preventDefault();
		        }
		    }, { passive: false });
		
		    document.addEventListener('touchstart', function(e) {
		        if (e.touches.length > 1) {
		            e.preventDefault();
		        }
		    }, { passive: false });
		
		    // 阻止双击缩放
		    let lastTouchEnd = 0;
		    document.addEventListener('touchend', function(e) {
		        const now = Date.now();
		        if (now - lastTouchEnd <= 300) {
		            e.preventDefault();
		        }
		        lastTouchEnd = now;
		    }, { passive: false });
		
		    // 阻止手势缩放
		    document.addEventListener('gesturestart', function(e) {
		        e.preventDefault();
		    });
		    document.addEventListener('gesturechange', function(e) {
		        e.preventDefault();
		    });
		    document.addEventListener('gestureend', function(e) {
		        e.preventDefault();
		    });
		
		    // 防止滚动
		    canvas.addEventListener('touchstart', function(e) {
		        if (e.target === canvas) {
		            e.preventDefault();
		        }
		    });
		    canvas.addEventListener('touchmove', function(e) {
		        if (e.target === canvas) {
		            e.preventDefault();
		        }
		    });
		}
		
		optimizeCanvasForMobile(document.getElementById('drawingCanvas'));
	</script>
</html>
